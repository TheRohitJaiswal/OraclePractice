SQL> select * from emp;

     EMPNO ENAME      JOB              MGR HIREDATE         SAL       COMM      
---------- ---------- --------- ---------- --------- ---------- ----------      
    DEPTNO                                                                      
----------                                                                      
      7369 SMITH      CLERK           7902 17-DEC-80        800                 
        20                                                                      
                                                                                
      7499 ALLEN      SALESMAN        7698 20-FEB-81       1600        300      
        30                                                                      
                                                                                
      7521 WARD       SALESMAN        7698 22-FEB-81       1250        500      
        30                                                                      
                                                                                

     EMPNO ENAME      JOB              MGR HIREDATE         SAL       COMM      
---------- ---------- --------- ---------- --------- ---------- ----------      
    DEPTNO                                                                      
----------                                                                      
      7566 JONES      MANAGER         7839 02-APR-81       2975                 
        20                                                                      
                                                                                
      7654 MARTIN     SALESMAN        7698 28-SEP-81       1250       1400      
        30                                                                      
                                                                                
      7698 BLAKE      MANAGER         7839 01-MAY-81       2850                 
        30                                                                      
                                                                                

     EMPNO ENAME      JOB              MGR HIREDATE         SAL       COMM      
---------- ---------- --------- ---------- --------- ---------- ----------      
    DEPTNO                                                                      
----------                                                                      
      7782 CLARK      MANAGER         7839 09-JUN-81       2450                 
        10                                                                      
                                                                                
      7788 SCOTT      ANALYST         7566 09-DEC-82       3000                 
        20                                                                      
                                                                                
      7839 KING       PRESIDENT            17-NOV-81       5000                 
        10                                                                      
                                                                                

     EMPNO ENAME      JOB              MGR HIREDATE         SAL       COMM      
---------- ---------- --------- ---------- --------- ---------- ----------      
    DEPTNO                                                                      
----------                                                                      
      7844 TURNER     SALESMAN        7698 08-SEP-81       1500          0      
        30                                                                      
                                                                                
      7876 ADAMS      CLERK           7788 12-JAN-83       1100                 
        20                                                                      
                                                                                
      7900 JAMES      CLERK           7698 03-DEC-81        950                 
        30                                                                      
                                                                                

     EMPNO ENAME      JOB              MGR HIREDATE         SAL       COMM      
---------- ---------- --------- ---------- --------- ---------- ----------      
    DEPTNO                                                                      
----------                                                                      
      7902 FORD       ANALYST         7566 03-DEC-81       3000                 
        20                                                                      
                                                                                
      7934 MILLER     CLERK           7782 23-JAN-82       1300                 
        10                                                                      
                                                                                

14 rows selected.

SQL> SET LINESIZE 999
SQL> CREATE OR REPLACE PACKAGE PK1
  2  IS
  3  PROCEDURE REC_INSERT(V_EMPNO EMP.EMPNO%TYPE,V_ENAME EMP.ENAME%TYPE,
  4  V_SAL EMP.SAL%TYPE);
  5  END;
  6  /

Package created.

SQL> ED
Wrote file afiedt.buf

  1  CREATE OR REPLACE PACKAGE PK1
  2  IS
  3  PROCEDURE REC_INSERT(V_EMPNO EMP.EMPNO%TYPE,V_ENAME EMP.ENAME%TYPE,
  4  V_SAL EMP.SAL%TYPE)
  5* END;
SQL> /

Warning: Package created with compilation errors.

SQL> SHOW ERR
Errors for PACKAGE PK1:

LINE/COL ERROR                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
-------- -----------------------------------------------------------------                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             
5/1      PLS-00103: Encountered the symbol "END" when expecting one of the                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             
         following:                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    
         ; is with authid as cluster order using external                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
         deterministic parallel_enable pipelined result_cache                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          
         The symbol ";" was substituted for "END" to continue.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       
SQL> ED
Wrote file afiedt.buf

  1  CREATE OR REPLACE PACKAGE PK1
  2  IS
  3  PROCEDURE REC_INSERT(V_EMPNO EMP.EMPNO%TYPE,V_ENAME EMP.ENAME%TYPE,
  4  V_SAL EMP.SAL%TYPE);
  5* END;
SQL> /

Package created.

SQL> CREATE OR REPLACE PACKAGE PK1
  2  IS
  3  PROCEDURE REC_INSERT(V_EMPNO EMP.EMPNO%TYPE,V_ENAME EMP.ENAME%TYPE,
  4  V_SAL EMP.SAL%TYPE);
  5  V_COUNT BINARY_INTEGER;
  6  END;
  7  /

Package created.

SQL> CREATE OR REPLACE PACKAGE BODY PK1
  2  IS
  3  FUNCTION CAL_MAXSAL(V_NSAL EMP.SAL%TYPE) RETURN BOOLEAN
  4  IS
  5  MAXSAL EMP.SAL%TYPE;
  6  BEGIN
  7  SELECT MAX(SAL) INTO MAXSAL FROM EMP;
  8  IF MAXSAL>=V_NSAL THEN
  9   RETURN TRUE;
 10  ELSE
 11    RETURN FALSE;
 12  END IF;
 13  END;
 14  PROCEDURE REC_INSERT(V_EMPNO EMP.EMPNO%TYPE,V_ENAME EMP.ENAME%TYPE,
 15  V_SAL EMP.SAL%TYPE)
 16  IS
 17  BEGIN
 18  SELECT COUNT(*) INTO V_COUNT FROM EMP WHERE EMPNO=V_EMPNO;
 19   IF V_COUNT=0 THEN
 20    IF CAL_MAXSAL(V_SAL) THEN
 21      INSERT INTO EMP(EMPNO,ENAME,SAL) VALUES(V_EMPNO,V_ENAME,V_SAL);
 22      DBMS_OUTPUT.PUT_LINE('REC INSERTED');
 23    ELSE
 24     RAISE_APPLICATION_ERROR(-20001,'Nsal cannot be More than Maxsal');
 25   END IF;
 26  ELSE
 27   RAISE_APPLICATION_ERROR(-20002,'Empno already Exists');
 28  END IF;
 29  COMMIT;
 30  END;
 31  END;
 32  /

Package body created.

SQL> EXECUTE PK1.REC_INSERT(10,'WILLIAM',1000)

PL/SQL procedure successfully completed.

SQL> SET SERVEROUTPUT ON
SQL> SELECT * FROM EMP WHERE EMPNO=101;

no rows selected

SQL> EXECUTE PK1.REC_INSERT(10,'WILLIAM',1000)
BEGIN PK1.REC_INSERT(10,'WILLIAM',1000); END;

*
ERROR at line 1:
ORA-20002: Empno already Exists 
ORA-06512: at "SCOTT.PK1", line 27 
ORA-06512: at line 1 


SQL> SELECT * FROM EMP WHERE EMPNO=10;

     EMPNO ENAME      JOB              MGR HIREDATE         SAL       COMM     DEPTNO                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
---------- ---------- --------- ---------- --------- ---------- ---------- ----------                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
        10 WILLIAM                                         1000                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        

SQL> EXECUTE PK1.REC_INSERT(101,'MARY',7000)
BEGIN PK1.REC_INSERT(101,'MARY',7000); END;

*
ERROR at line 1:
ORA-20001: Nsal cannot be More than Maxsal 
ORA-06512: at "SCOTT.PK1", line 24 
ORA-06512: at line 1 


SQL> SELECT * FROM EMP WHERE EMPNO=101;

no rows selected

SQL> CREATE OR REPLACE PACKAGE PK1
  2  IS
  3  PROCEDURE REC_INSERT(V_EMPNO EMP.EMPNO%TYPE,V_ENAME EMP.ENAME%TYPE,
  4  V_SAL EMP.SAL%TYPE);
  5  PROCEDURE REC_UPDATE(V_EMPNO EMP.EMPNO%TYPE,V_ENAME EMP.ENAME%TYPE,
  6  V_SAL EMP.SAL%TYPE);
  7  V_COUNT BINARY_INTEGER;
  8  END;
  9  /

Package created.

SQL> CREATE OR REPLACE PACKAGE BODY PK1
  2  IS
  3  FUNCTION CAL_MAXSAL(V_NSAL EMP.SAL%TYPE) RETURN BOOLEAN
  4  IS
  5  MAXSAL EMP.SAL%TYPE;
  6  BEGIN
  7  SELECT MAX(SAL) INTO MAXSAL FROM EMP;
  8  IF MAXSAL>=V_NSAL THEN
  9   RETURN TRUE;
 10  ELSE
 11    RETURN FALSE;
 12  END IF;
 13  END;
 14  PROCEDURE REC_INSERT(V_EMPNO EMP.EMPNO%TYPE,V_ENAME EMP.ENAME%TYPE,
 15  V_SAL EMP.SAL%TYPE)
 16  IS
 17  BEGIN
 18  SELECT COUNT(*) INTO V_COUNT FROM EMP WHERE EMPNO=V_EMPNO;
 19   IF V_COUNT=0 THEN
 20    IF CAL_MAXSAL(V_SAL) THEN
 21      INSERT INTO EMP(EMPNO,ENAME,SAL) VALUES(V_EMPNO,V_ENAME,V_SAL);
 22      DBMS_OUTPUT.PUT_LINE('REC INSERTED');
 23    ELSE
 24     RAISE_APPLICATION_ERROR(-20001,'Nsal cannot be More than Maxsal');
 25   END IF;
 26  ELSE
 27   RAISE_APPLICATION_ERROR(-20002,'Empno already Exists');
 28  END IF;
 29  COMMIT;
 30  END;
 31  PROCEDURE REC_UPDATE(V_EMPNO EMP.EMPNO%TYPE,V_ENAME EMP.ENAME%TYPE,
 32  V_SAL EMP.SAL%TYPE)
 33  IS
 34  BEGIN
 35  SELECT COUNT(*) INTO V_COUNT FROM EMP WHERE EMPNO=V_EMPNO;
 36  IF V_COUNT>0 THEN
 37   IF CAL_MAXSAL(V_SAL) THEN
 38    UPDATE EMP SET ENAME=V_ENAME,SAL=V_SAL WHERE EMPNO=V_EMPNO;
 39    DBMS_OUTPUT.PUT_LINE('REC UPDATED');
 40   ELSE
 41   RAISE_APPLICATION_ERROR(-20003,'New Salary Cannot be More than MaxSal');
 42  END IF;
 43  ELSE
 44  RAISE_APPLICATION_ERROR(-20004,'Empno Does Not Exists Cannot Update');
 45  END IF;
 46  END;
 47  END;
 48  /

Package body created.

SQL> 
SQL> SELECT * FROM EMP WHERE EMPNO=10;

     EMPNO ENAME      JOB              MGR HIREDATE         SAL       COMM     DEPTNO                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
---------- ---------- --------- ---------- --------- ---------- ---------- ----------                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
        10 WILLIAM                                         1000                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        

SQL> EXEC PK1.REC_UPDATE(10,'HARISH',2000)
REC UPDATED                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            

PL/SQL procedure successfully completed.

SQL> SELECT * FROM EMP WHERE EMPNO=10;

     EMPNO ENAME      JOB              MGR HIREDATE         SAL       COMM     DEPTNO                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
---------- ---------- --------- ---------- --------- ---------- ---------- ----------                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
        10 HARISH                                          2000                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        

SQL> EXEC PK1.REC_UPDATE(11,'HARISH',2000)
BEGIN PK1.REC_UPDATE(11,'HARISH',2000); END;

*
ERROR at line 1:
ORA-20004: Empno Does Not Exists Cannot Update 
ORA-06512: at "SCOTT.PK1", line 44 
ORA-06512: at line 1 


SQL> EXEC PK1.REC_UPDATE(10,'HARISH',9000)
BEGIN PK1.REC_UPDATE(10,'HARISH',9000); END;

*
ERROR at line 1:
ORA-20003: New Salary Cannot be More than MaxSal 
ORA-06512: at "SCOTT.PK1", line 41 
ORA-06512: at line 1 


SQL> CREATE OR REPLACE PACKAGE PK1
  2  IS
  3  PROCEDURE REC_INSERT(V_EMPNO EMP.EMPNO%TYPE,V_ENAME EMP.ENAME%TYPE,
  4  V_SAL EMP.SAL%TYPE);
  5  PROCEDURE REC_UPDATE(V_EMPNO EMP.EMPNO%TYPE,V_ENAME EMP.ENAME%TYPE,
  6  V_SAL EMP.SAL%TYPE);
  7  PROCEDURE REC_DELETE(V_EMPNO EMP.EMPNO%TYPE);
  8  V_COUNT BINARY_INTEGER;
  9  END;
 10  /

Package created.

SQL> CREATE OR REPLACE PACKAGE BODY PK1
  2  IS
  3  FUNCTION CAL_MAXSAL(V_NSAL EMP.SAL%TYPE) RETURN BOOLEAN
  4  IS
  5  MAXSAL EMP.SAL%TYPE;
  6  BEGIN
  7  SELECT MAX(SAL) INTO MAXSAL FROM EMP;
  8  IF MAXSAL>=V_NSAL THEN
  9   RETURN TRUE;
 10  ELSE
 11    RETURN FALSE;
 12  END IF;
 13  END;
 14  PROCEDURE REC_INSERT(V_EMPNO EMP.EMPNO%TYPE,V_ENAME EMP.ENAME%TYPE,
 15  V_SAL EMP.SAL%TYPE)
 16  IS
 17  BEGIN
 18  SELECT COUNT(*) INTO V_COUNT FROM EMP WHERE EMPNO=V_EMPNO;
 19   IF V_COUNT=0 THEN
 20    IF CAL_MAXSAL(V_SAL) THEN
 21      INSERT INTO EMP(EMPNO,ENAME,SAL) VALUES(V_EMPNO,V_ENAME,V_SAL);
 22      DBMS_OUTPUT.PUT_LINE('REC INSERTED');
 23    ELSE
 24     RAISE_APPLICATION_ERROR(-20001,'Nsal cannot be More than Maxsal');
 25   END IF;
 26  ELSE
 27   RAISE_APPLICATION_ERROR(-20002,'Empno already Exists');
 28  END IF;
 29  COMMIT;
 30  END;
 31  PROCEDURE REC_UPDATE(V_EMPNO EMP.EMPNO%TYPE,V_ENAME EMP.ENAME%TYPE,
 32  V_SAL EMP.SAL%TYPE)
 33  IS
 34  BEGIN
 35  SELECT COUNT(*) INTO V_COUNT FROM EMP WHERE EMPNO=V_EMPNO;
 36  IF V_COUNT>0 THEN
 37   IF CAL_MAXSAL(V_SAL) THEN
 38    UPDATE EMP SET ENAME=V_ENAME,SAL=V_SAL WHERE EMPNO=V_EMPNO;
 39    DBMS_OUTPUT.PUT_LINE('REC UPDATED');
 40   ELSE
 41   RAISE_APPLICATION_ERROR(-20003,'New Salary Cannot be More than MaxSal');
 42  END IF;
 43  ELSE
 44  RAISE_APPLICATION_ERROR(-20004,'Empno Does Not Exists Cannot Update');
 45  END IF;
 46  COMMIT;
 47  END;
 48  PROCEDURE REC_DELETE(V_EMPNO EMP.EMPNO%TYPE)
 49  IS
 50  BEGIN
 51  SELECT COUNT(*) INTO V_COUNT FROM EMP WHERE EMPNO=V_EMPNO;
 52   IF V_COUNT>0 THEN
 53     DELETE FROM EMP WHERE EMPNO=V_EMPNO;
 54     DBMS_OUTPUT.PUT_LINE('REC DELETED');
 55   ELSE
 56   RAISE_APPLICATION_ERROR(-20005,'Empno Does Not Exists for Deletion');
 57  END IF;
 58  COMMIT;
 59  END;
 60  END;
 61  /

Package body created.

SQL> EXEC PK1.REC_DELETE(10)
REC DELETED                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            

PL/SQL procedure successfully completed.

SQL> SELECT * FROM EMP WHERE EMPNO=10;

no rows selected

SQL> EXEC PK1.REC_DELETE(10)
BEGIN PK1.REC_DELETE(10); END;

*
ERROR at line 1:
ORA-20005: Empno Does Not Exists for Deletion 
ORA-06512: at "SCOTT.PK1", line 56 
ORA-06512: at line 1 


SQL> SHOW USER
USER is "SCOTT"
SQL> GRANT EXECUTE ON PK1 TO WIPRO;

Grant succeeded.

SQL> SELECT * FROM EMP WHERE EMPNO=102;

     EMPNO ENAME      JOB              MGR HIREDATE         SAL       COMM     DEPTNO                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
---------- ---------- --------- ---------- --------- ---------- ---------- ----------                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
       102 JAYDEN                                          2000                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        

SQL> SHOW USER
USER is "SCOTT"
SQL> SELECT TEXT FROM USER_SOURCE WHERE NAME='PK1';

TEXT                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
PACKAGE PK1                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
IS                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
PROCEDURE REC_INSERT(V_EMPNO EMP.EMPNO%TYPE,V_ENAME EMP.ENAME%TYPE,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    
V_SAL EMP.SAL%TYPE);                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
PROCEDURE REC_UPDATE(V_EMPNO EMP.EMPNO%TYPE,V_ENAME EMP.ENAME%TYPE,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    
V_SAL EMP.SAL%TYPE);                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
PROCEDURE REC_DELETE(V_EMPNO EMP.EMPNO%TYPE);                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          
V_COUNT BINARY_INTEGER;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
END;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
PACKAGE BODY PK1                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       
IS                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     

TEXT                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
FUNCTION CAL_MAXSAL(V_NSAL EMP.SAL%TYPE) RETURN BOOLEAN                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
IS                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
MAXSAL EMP.SAL%TYPE;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
BEGIN                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
SELECT MAX(SAL) INTO MAXSAL FROM EMP;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
IF MAXSAL>=V_NSAL THEN                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 
 RETURN TRUE;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          
ELSE                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
  RETURN FALSE;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        
END IF;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
END;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   

TEXT                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
PROCEDURE REC_INSERT(V_EMPNO EMP.EMPNO%TYPE,V_ENAME EMP.ENAME%TYPE,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    
V_SAL EMP.SAL%TYPE)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    
IS                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
BEGIN                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
SELECT COUNT(*) INTO V_COUNT FROM EMP WHERE EMPNO=V_EMPNO;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             
 IF V_COUNT=0 THEN                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
  IF CAL_MAXSAL(V_SAL) THEN                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
    INSERT INTO EMP(EMPNO,ENAME,SAL) VALUES(V_EMPNO,V_ENAME,V_SAL);                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    
    DBMS_OUTPUT.PUT_LINE('REC INSERTED');                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
  ELSE                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 
   RAISE_APPLICATION_ERROR(-20001,'Nsal cannot be More than Maxsal');                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  

TEXT                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 END IF;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               
ELSE                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
 RAISE_APPLICATION_ERROR(-20002,'Empno already Exists');                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               
END IF;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
COMMIT;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
END;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
PROCEDURE REC_UPDATE(V_EMPNO EMP.EMPNO%TYPE,V_ENAME EMP.ENAME%TYPE,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    
V_SAL EMP.SAL%TYPE)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    
IS                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
BEGIN                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
SELECT COUNT(*) INTO V_COUNT FROM EMP WHERE EMPNO=V_EMPNO;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             

TEXT                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
IF V_COUNT>0 THEN                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
 IF CAL_MAXSAL(V_SAL) THEN                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             
  UPDATE EMP SET ENAME=V_ENAME,SAL=V_SAL WHERE EMPNO=V_EMPNO;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          
  DBMS_OUTPUT.PUT_LINE('REC UPDATED');                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 
 ELSE                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
 RAISE_APPLICATION_ERROR(-20003,'New Salary Cannot be More than MaxSal');                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
END IF;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
ELSE                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
RAISE_APPLICATION_ERROR(-20004,'Empno Does Not Exists Cannot Update');                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 
END IF;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
COMMIT;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                

TEXT                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
END;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
PROCEDURE REC_DELETE(V_EMPNO EMP.EMPNO%TYPE)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           
IS                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
BEGIN                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
SELECT COUNT(*) INTO V_COUNT FROM EMP WHERE EMPNO=V_EMPNO;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             
 IF V_COUNT>0 THEN                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
   DELETE FROM EMP WHERE EMPNO=V_EMPNO;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
   DBMS_OUTPUT.PUT_LINE('REC DELETED');                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
 ELSE                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
 RAISE_APPLICATION_ERROR(-20005,'Empno Does Not Exists for Deletion');                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 
END IF;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                

TEXT                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
COMMIT;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
END;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
END;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   

69 rows selected.

SQL> SHOW USER
USER is "SCOTT"
SQL> CREATE OR REPLACE PACKAGE PK1
  2  IS
  3  PROCEDURE REC_INSERT(V_EMPNO EMP.EMPNO%TYPE,V_ENAME EMP.ENAME%TYPE,
  4  V_SAL EMP.SAL%TYPE);
  5  PROCEDURE REC_UPDATE(V_EMPNO EMP.EMPNO%TYPE,V_ENAME EMP.ENAME%TYPE,
  6  V_SAL EMP.SAL%TYPE);
  7  PROCEDURE REC_DELETE(V_EMPNO EMP.EMPNO%TYPE);
  8  V_COUNT BINARY_INTEGER;
  9  CURSOR V_C1 IS SELECT EMPNO FROM EMP;
 10  END;
 11  /

Package created.

SQL> BEGIN
  2  FOR REC IN PK1.V_C1 LOOP
  3  DBMS_OUPUT.PUT_LINE(REC.EMPNO);
  4  END LOOP;
  5  END;
  6  /
DBMS_OUPUT.PUT_LINE(REC.EMPNO);
*
ERROR at line 3:
ORA-06550: line 3, column 1: 
PLS-00201: identifier 'DBMS_OUPUT.PUT_LINE' must be declared 
ORA-06550: line 3, column 1: 
PL/SQL: Statement ignored 


SQL> BEGIN
  2  FOR REC IN PK1.V_C1 LOOP
  3  DBMS_OUTPUT.PUT_LINE(REC.EMPNO);
  4  END LOOP;
  5  END;
  6  /
102                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    
7369                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
7499                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
7521                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
7566                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
7654                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
7698                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
7782                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
7788                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
7839                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
7844                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
7876                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
7900                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
7902                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
7934                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   

PL/SQL procedure successfully completed.

SQL> BEGIN
  2  SELECT COUNT(*) INTO PK1.V_COUNT FROM EMP;
  3  DBMS_OUTPUT.PUT_LINE(PK1.V_COUNT);
  4  END;
  5  /
15                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     

PL/SQL procedure successfully completed.

SQL> SHOW USER
USER is "SCOTT"
SQL> CREATE OR REPLACE PACKAGE BODY PK1
  2  IS
  3  PROCEDURE REC_INSERT(V_EMPNO EMP.EMPNO%TYPE,V_ENAME EMP.ENAME%TYPE,
  4  V_SAL EMP.SAL%TYPE)
  5  IS
  6  BEGIN
  7  SELECT COUNT(*) INTO V_COUNT FROM EMP WHERE EMPNO=V_EMPNO;
  8   IF V_COUNT=0 THEN
  9    IF CAL_MAXSAL(V_SAL) THEN
 10      INSERT INTO EMP(EMPNO,ENAME,SAL) VALUES(V_EMPNO,V_ENAME,V_SAL);
 11      DBMS_OUTPUT.PUT_LINE('REC INSERTED');
 12    ELSE
 13     RAISE_APPLICATION_ERROR(-20001,'Nsal cannot be More than Maxsal');
 14   END IF;
 15  ELSE
 16   RAISE_APPLICATION_ERROR(-20002,'Empno already Exists');
 17  END IF;
 18  COMMIT;
 19  END;
 20  FUNCTION CAL_MAXSAL(V_NSAL EMP.SAL%TYPE) RETURN BOOLEAN
 21  IS
 22  MAXSAL EMP.SAL%TYPE;
 23  BEGIN
 24  SELECT MAX(SAL) INTO MAXSAL FROM EMP;
 25  IF MAXSAL>=V_NSAL THEN
 26   RETURN TRUE;
 27  ELSE
 28    RETURN FALSE;
 29  END IF;
 30  END;
 31  PROCEDURE REC_UPDATE(V_EMPNO EMP.EMPNO%TYPE,V_ENAME EMP.ENAME%TYPE,
 32  V_SAL EMP.SAL%TYPE)
 33  IS
 34  BEGIN
 35  SELECT COUNT(*) INTO V_COUNT FROM EMP WHERE EMPNO=V_EMPNO;
 36  IF V_COUNT>0 THEN
 37   IF CAL_MAXSAL(V_SAL) THEN
 38    UPDATE EMP SET ENAME=V_ENAME,SAL=V_SAL WHERE EMPNO=V_EMPNO;
 39    DBMS_OUTPUT.PUT_LINE('REC UPDATED');
 40   ELSE
 41   RAISE_APPLICATION_ERROR(-20003,'New Salary Cannot be More than MaxSal');
 42  END IF;
 43  ELSE
 44  RAISE_APPLICATION_ERROR(-20004,'Empno Does Not Exists Cannot Update');
 45  END IF;
 46  COMMIT;
 47  END;
 48  PROCEDURE REC_DELETE(V_EMPNO EMP.EMPNO%TYPE)
 49  IS
 50  BEGIN
 51  SELECT COUNT(*) INTO V_COUNT FROM EMP WHERE EMPNO=V_EMPNO;
 52   IF V_COUNT>0 THEN
 53     DELETE FROM EMP WHERE EMPNO=V_EMPNO;
 54     DBMS_OUTPUT.PUT_LINE('REC DELETED');
 55   ELSE
 56   RAISE_APPLICATION_ERROR(-20005,'Empno Does Not Exists for Deletion');
 57  END IF;
 58  COMMIT;
 59  END;
 60  END;
 61  
 62  /

Warning: Package Body created with compilation errors.

SQL> SHOW ERR
Errors for PACKAGE BODY PK1:

LINE/COL ERROR                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
-------- -----------------------------------------------------------------                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             
9/3      PL/SQL: Statement ignored                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
9/6      PLS-00313: 'CAL_MAXSAL' not declared in this scope                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
SQL> CREATE OR REPLACE PACKAGE BODY PK1
  2  IS
  3  FUNCTION CAL_MAXSAL(V_NSAL EMP.SAL%TYPE) RETURN BOOLEAN;
  4  PROCEDURE REC_INSERT(V_EMPNO EMP.EMPNO%TYPE,V_ENAME EMP.ENAME%TYPE,
  5  V_SAL EMP.SAL%TYPE)
  6  IS
  7  BEGIN
  8  SELECT COUNT(*) INTO V_COUNT FROM EMP WHERE EMPNO=V_EMPNO;
  9   IF V_COUNT=0 THEN
 10    IF CAL_MAXSAL(V_SAL) THEN
 11      INSERT INTO EMP(EMPNO,ENAME,SAL) VALUES(V_EMPNO,V_ENAME,V_SAL);
 12      DBMS_OUTPUT.PUT_LINE('REC INSERTED');
 13    ELSE
 14     RAISE_APPLICATION_ERROR(-20001,'Nsal cannot be More than Maxsal');
 15   END IF;
 16  ELSE
 17   RAISE_APPLICATION_ERROR(-20002,'Empno already Exists');
 18  END IF;
 19  COMMIT;
 20  END;
 21  FUNCTION CAL_MAXSAL(V_NSAL EMP.SAL%TYPE) RETURN BOOLEAN
 22  IS
 23  MAXSAL EMP.SAL%TYPE;
 24  BEGIN
 25  SELECT MAX(SAL) INTO MAXSAL FROM EMP;
 26  IF MAXSAL>=V_NSAL THEN
 27   RETURN TRUE;
 28  ELSE
 29    RETURN FALSE;
 30  END IF;
 31  END;
 32  PROCEDURE REC_UPDATE(V_EMPNO EMP.EMPNO%TYPE,V_ENAME EMP.ENAME%TYPE,
 33  V_SAL EMP.SAL%TYPE)
 34  IS
 35  BEGIN
 36  SELECT COUNT(*) INTO V_COUNT FROM EMP WHERE EMPNO=V_EMPNO;
 37  IF V_COUNT>0 THEN
 38   IF CAL_MAXSAL(V_SAL) THEN
 39    UPDATE EMP SET ENAME=V_ENAME,SAL=V_SAL WHERE EMPNO=V_EMPNO;
 40    DBMS_OUTPUT.PUT_LINE('REC UPDATED');
 41   ELSE
 42   RAISE_APPLICATION_ERROR(-20003,'New Salary Cannot be More than MaxSal');
 43  END IF;
 44  ELSE
 45  RAISE_APPLICATION_ERROR(-20004,'Empno Does Not Exists Cannot Update');
 46  END IF;
 47  COMMIT;
 48  END;
 49  PROCEDURE REC_DELETE(V_EMPNO EMP.EMPNO%TYPE)
 50  IS
 51  BEGIN
 52  SELECT COUNT(*) INTO V_COUNT FROM EMP WHERE EMPNO=V_EMPNO;
 53   IF V_COUNT>0 THEN
 54     DELETE FROM EMP WHERE EMPNO=V_EMPNO;
 55     DBMS_OUTPUT.PUT_LINE('REC DELETED');
 56   ELSE
 57   RAISE_APPLICATION_ERROR(-20005,'Empno Does Not Exists for Deletion');
 58  END IF;
 59  COMMIT;
 60  END;
 61  END;
 62  /

Package body created.

SQL> SHOW USER
USER is "SCOTT"
SQL> CREATE OR REPLACE PACKAGE BODY PK1
  2  IS
  3  V_USER VARCHAR2(50);
  4  FUNCTION CAL_MAXSAL(V_NSAL EMP.SAL%TYPE) RETURN BOOLEAN;
  5  PROCEDURE REC_INSERT(V_EMPNO EMP.EMPNO%TYPE,V_ENAME EMP.ENAME%TYPE,
  6  V_SAL EMP.SAL%TYPE)
  7  IS
  8  BEGIN
  9  SELECT COUNT(*) INTO V_COUNT FROM EMP WHERE EMPNO=V_EMPNO;
 10   IF V_COUNT=0 THEN
 11    IF CAL_MAXSAL(V_SAL) THEN
 12      INSERT INTO EMP(EMPNO,ENAME,SAL) VALUES(V_EMPNO,V_ENAME,V_SAL);
 13      DBMS_OUTPUT.PUT_LINE('REC INSERTED');
 14    ELSE
 15     RAISE_APPLICATION_ERROR(-20001,'Nsal cannot be More than Maxsal');
 16   END IF;
 17  ELSE
 18   RAISE_APPLICATION_ERROR(-20002,'Empno already Exists');
 19  END IF;
 20  COMMIT;
 21  END;
 22  FUNCTION CAL_MAXSAL(V_NSAL EMP.SAL%TYPE) RETURN BOOLEAN
 23  IS
 24  MAXSAL EMP.SAL%TYPE;
 25  BEGIN
 26  SELECT MAX(SAL) INTO MAXSAL FROM EMP;
 27  IF MAXSAL>=V_NSAL THEN
 28   RETURN TRUE;
 29  ELSE
 30    RETURN FALSE;
 31  END IF;
 32  END;
 33  PROCEDURE REC_UPDATE(V_EMPNO EMP.EMPNO%TYPE,V_ENAME EMP.ENAME%TYPE,
 34  V_SAL EMP.SAL%TYPE)
 35  IS
 36  BEGIN
 37  SELECT COUNT(*) INTO V_COUNT FROM EMP WHERE EMPNO=V_EMPNO;
 38  IF V_COUNT>0 THEN
 39   IF CAL_MAXSAL(V_SAL) THEN
 40    UPDATE EMP SET ENAME=V_ENAME,SAL=V_SAL WHERE EMPNO=V_EMPNO;
 41    DBMS_OUTPUT.PUT_LINE('REC UPDATED');
 42   ELSE
 43   RAISE_APPLICATION_ERROR(-20003,'New Salary Cannot be More than MaxSal');
 44  END IF;
 45  ELSE
 46  RAISE_APPLICATION_ERROR(-20004,'Empno Does Not Exists Cannot Update');
 47  END IF;
 48  COMMIT;
 49  END;
 50  PROCEDURE REC_DELETE(V_EMPNO EMP.EMPNO%TYPE)
 51  IS
 52  BEGIN
 53  SELECT COUNT(*) INTO V_COUNT FROM EMP WHERE EMPNO=V_EMPNO;
 54   IF V_COUNT>0 THEN
 55     DELETE FROM EMP WHERE EMPNO=V_EMPNO;
 56     DBMS_OUTPUT.PUT_LINE('REC DELETED');
 57   ELSE
 58   RAISE_APPLICATION_ERROR(-20005,'Empno Does Not Exists for Deletion');
 59  END IF;
 60  COMMIT;
 61  END;
 62  BEGIN
 63  SELECT USER INTO V_USER FROM DUAL;
 64  DBMS_OUTPUT.PUT_LINE('WELCOME '||V_USER);
 65  END;
 66  /

Package body created.

SQL> EXEC PK1.REC_INSERT(103,'MARK',1000)
WELCOME SCOTT                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          
REC INSERTED                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           

PL/SQL procedure successfully completed.

SQL> EXEC PK1.REC_DELETE(103)
REC DELETED                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            

PL/SQL procedure successfully completed.

SQL> SELECT TO_CHAR(SYSDATE,'DAY') FROM DUAL;

TO_CHAR(SYSDATE,'DAY')                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 
------------------------------------                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
MONDAY                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 

SQL> SELECT NVL(TO_CHAR(COMM),'NO COMM') FROM EMP;

NVL(TO_CHAR(COMM),'NOCOMM')                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
----------------------------------------                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               
NO COMM                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
NO COMM                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
300                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    
500                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    
NO COMM                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
1400                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
NO COMM                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
NO COMM                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
NO COMM                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
NO COMM                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
0                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      

NVL(TO_CHAR(COMM),'NOCOMM')                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
----------------------------------------                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               
NO COMM                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
NO COMM                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
NO COMM                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
NO COMM                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                

15 rows selected.

SQL> ALTER PACKAGE PK1 COMPILE SPECIFICATION;

Package altered.

SQL> ALTER PACKAGE PK1 COMPILE BODY;

Package body altered.

SQL> ALTER PACKAGE PK1 COMPILE PACKAGE;

Package altered.

SQL> DROP PACKAGE BODY PK1;

Package body dropped.

SQL> DROP PACKAGE PK1;

Package dropped.

SQL> exit
